# Урок 10: Функції та декоратори. Лямбда функції

## Мета уроку
Вивчити розширені можливості функцій у Python: лямбда функції, функції вищого порядку та основи декораторів.

## Теоретичний матеріал

### 1. Лямбда функції (анонімні функції)

Лямбда функції - це короткі анонімні функції, які можна визначити в одному рядку.

```python
# Звичайна функція
def square(x):
    return x ** 2

# Лямбда функція (те саме)
square_lambda = lambda x: x ** 2

print(square(5))        # 25
print(square_lambda(5)) # 25
```

### 2. Лямбда з кількома параметрами

```python
# Додавання двох чисел
add = lambda x, y: x + y
print(add(3, 5))  # 8

# Перевірка парності
is_even = lambda n: n % 2 == 0
print(is_even(4))  # True
print(is_even(7))  # False
```

### 3. Функції вищого порядку

Функції, які приймають інші функції як параметри або повертають функції.

```python
def apply_operation(numbers, operation):
    """Застосовує операцію до списку чисел"""
    return [operation(num) for num in numbers]

numbers = [1, 2, 3, 4, 5]

# Використання з лямбда
squares = apply_operation(numbers, lambda x: x ** 2)
print(squares)  # [1, 4, 9, 16, 25]

doubled = apply_operation(numbers, lambda x: x * 2)
print(doubled)  # [2, 4, 6, 8, 10]
```

### 4. Вбудовані функції з лямбда

```python
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

# filter() - фільтрація елементів
even_numbers = list(filter(lambda x: x % 2 == 0, numbers))
print(even_numbers)  # [2, 4, 6, 8, 10]

# map() - перетворення елементів
cubes = list(map(lambda x: x ** 3, numbers[:5]))
print(cubes)  # [1, 8, 27, 64, 125]

# sorted() - сортування з ключем
students = [("Іван", 85), ("Марія", 92), ("Петро", 78)]
sorted_by_grade = sorted(students, key=lambda student: student[1])
print(sorted_by_grade)  # [('Петро', 78), ('Іван', 85), ('Марія', 92)]
```

### 5. Основи декораторів

Декоратор - це функція, яка модифікує поведінку іншої функції.

```python
def my_decorator(func):
    """Простий декоратор"""
    def wrapper():
        print("Щось відбувається перед функцією")
        func()
        print("Щось відбувається після функції")
    return wrapper

@my_decorator
def say_hello():
    print("Привіт!")

say_hello()
# Виведе:
# Щось відбувається перед функцією
# Привіт!
# Щось відбувається після функції
```

### 6. Декоратор з параметрами

```python
def timer_decorator(func):
    """Декоратор для вимірювання часу виконання"""
    import time
    
    def wrapper(*args, **kwargs):
        start_time = time.time()
        result = func(*args, **kwargs)
        end_time = time.time()
        print(f"Функція {func.__name__} виконалась за {end_time - start_time:.4f} секунд")
        return result
    return wrapper

@timer_decorator
def slow_function():
    import time
    time.sleep(1)
    return "Готово!"

result = slow_function()
```

## Ключові поняття
- **Лямбда функція** - анонімна функція, визначена в одному рядку
- **Функція вищого порядку** - функція, яка приймає або повертає інші функції
- **Декоратор** - функція, яка модифікує поведінку іншої функції
- **@синтаксис** - спеціальний синтаксис для застосування декораторів

## Практичні поради
1. Використовуйте лямбда для простих операцій
2. Для складної логіки краще використовувати звичайні функції
3. Декоратори корисні для логування, вимірювання часу, перевірки прав доступу
4. Завжди використовуйте `functools.wraps` у декораторах для збереження метаданих функції

## Коли використовувати лямбда:
- ✅ Прості операції з `map()`, `filter()`, `sorted()`
- ✅ Короткі математичні операції
- ❌ Складна логіка з кількома рядками
- ❌ Функції, які потрібно викликати багато разів